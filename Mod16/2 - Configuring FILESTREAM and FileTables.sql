-- Demonstration 2 - Configuring FILESTREAM and FileTables

-- Step 1: Configure FILESTREAM Access Level
-- Select and execute the following statement to configure FILESTREAM at the instance level

EXEC sp_configure filestream_access_level, 2
RECONFIGURE;
GO

-- Step 2: Create a FILESTREAM Filegroup
-- Select and execute the following statement to add a FILESTREAM FileGroup to the 
-- AdventureWorks database

ALTER DATABASE AdventureWorks2016
ADD FILEGROUP FILESTREAMGroup CONTAINS FILESTREAM;
GO

ALTER DATABASE AdventureWorks2016
ADD FILE (NAME='FILESTREAMGroup', FILENAME='E:\GIANFRANCO\CURSOS\20762C\1_EDICION\20762C-Grupo01\Mod16\AdventureWorksFILESTREAM')
TO FILEGROUP FILESTREAMGroup
GO

-- Step 3: Add a ROWGUID Column to the ProductPhoto Table
-- Select and execute the following statement to add a ROWGUID column to the 
-- ProductPhoto table. This is a requirement for FILESTREAM

USE AdventureWorks2016;
GO

--SELECT * from Production.ProductPhoto 
--SELECT newid()

ALTER TABLE Production.ProductPhoto 
ADD PhotoGuid UNIQUEIDENTIFIER NOT NULL ROWGUIDCOL UNIQUE DEFAULT newid();
GO

-- Step 4: Enable FILESTREAM for the ProductPhoto Table
-- Select and execute the following statement to enable FILESTREAM for the
-- ProductPhoto table.

ALTER TABLE Production.ProductPhoto
SET (filestream_on = FILESTREAMGroup);
GO

-- Step 5: Add a FILESTREAM Column to the ProductPhoto Table
-- Select and execute the following statement to create a new FILESTREAM column
-- in the ProductPhoto table.

ALTER TABLE Production.ProductPhoto
ADD MediumPhoto varbinary(max) FILESTREAM NULL;
GO

-- Step 6: Check Non-Transactional Access
-- Select and execute the following statement to check whether non-transactional
-- access is enabled for all databases. In the results, scroll down to locate the 
-- AdventureWorks2016 database

SELECT DB_NAME(database_id), non_transacted_access, non_transacted_access_desc
    FROM sys.database_filestream_options;
GO

-- Step 7: Enable Non-Transactional Access
-- Select and execute the following statement to enable non-transactional access
-- for the Adventure Works database.

ALTER DATABASE AdventureWorks2016
SET FILESTREAM ( NON_TRANSACTED_ACCESS = FULL, DIRECTORY_NAME = N'FileTablesDirectory' );
GO

--Step 8: Create a FileTable
-- Select and execute the following statement to create a new FileTable

CREATE TABLE DocumentStore AS FileTable
WITH (FileTable_Directory = 'DocumentStore');
GO
/*
stream_id	file_stream	name	path_locator	parent_path_locator	file_type	cached_file_size	creation_time	last_write_time	last_access_time	is_directory	is_offline	is_hidden	is_readonly	is_archive	is_system	is_temporary
5730E441-895B-EB11-9853-68071552F25F	0x	20762C_MOD16.docx	0xFF0353400E51310FC4D33545741A36F93CAF9962A0	NULL	docx	0	2021-01-20 20:37:44.9052887 -05:00	2021-01-20 20:37:45.2191982 -05:00	2021-01-20 20:37:45.2191982 -05:00	0	0	0	0	1	0	0
stream_id	file_stream	name	path_locator	parent_path_locator	file_type	cached_file_size	creation_time	last_write_time	last_access_time	is_directory	is_offline	is_hidden	is_readonly	is_archive	is_system	is_temporary
87CE3477-895B-EB11-9853-68071552F25F	0x504B030414000600080000002100DFA4D26C5A01000020050000130008025B436F6E74656E745F54797065735D2E786D6C20A2040228A000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000B494CB6EC2301045F795FA0F91B75562E8A2AA2A028B3E962D52E907187B0256FD92C7BCFEBE1302515501910A6C222533F7DE3356C683D1DA9A6C0911B57725EB173D9681935E69372BD9D7E42D7F641926E19430DE41C936806C34BCBD194C36013023B5C392CD530A4F9CA39C831558F8008E2A958F56247A8D331E84FC1633E0F7BDDE0397DE2570294FB5071B0E5EA0120B93B2D7357D6E48221864D973D35867954C8460B41489EA7CE9D49F947C97509072DB83731DF08E1A183F9850578E07EC741F7434512BC8C622A67761A98BAF7C545C79B9B0A42C4EDB1CE0F455A525B4FADA2D442F0191CEDC9AA2AD58A1DD9EFF2807A68D01BC3C45E3DB1D0F2991E01A003BE74E84154C3FAF46F1CBBC13A4A2DC89981AB83C466BDD09916803A179F6CFE6D8DA9C8AA4CE71F40169A3E33FC6DEAF6CADCE69E00031E9D37F5D9B48D667CF07F56DA0401DC8E6DBFB6DF8030000FFFF0300504B0304140006000800000021001E911AB7EF0000004E0200000B0008025F72656C732F2E72656C7320A2040228A000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000AC92C16AC3300C40EF83FD83D1BD51DAC118A34E2F63D0DB18D907085B494C13DBD86AD7FEFD3CD8D8025DE96147CBD2D393D07A739C4675E0945DF01A96550D8ABD09D6F95EC35BFBBC78009585BCA53178D670E20C9BE6F666FDCA234929CA838B59158ACF1A0691F88898CDC013E52A44F6E5A70B692229CFD46324B3A39E7155D7F7987E33A09931D5D66A485B7B07AA3D45BE861DBACE197E0A663FB197332D908FC2DEB25DC454EA93B8328D6A29F52C1A6C302F259C9162AC0A1AF0BCD1EA7AA3BFA7C589852C09A109892FFB7C665C125AFEE78AE6193F36EF2159B45FE16F1B9C5D41F3010000FFFF0300504B030414000600080000002100702846C7E3020000080B000011000000776F72642F646F63756D656E742E786D6CA496DB8EDB201040DF2BF51F22BF67314EE264AD4D566DB259ED43A5A8DB7E00C1C4466BC00272EBD777F0254EEB76E5785FB8CC30871918463C3C9E443638306DB892730FDFF9DE8049AA622E93B9F7F3C77A38F306C61219934C4936F7CECC788F8BCF9F1E8E51ACE85E3069078090263AE674EEA5D6E6114286A64C10732738D5CAA89DBDA34A20B5DB71CAD051E918053EF68B51AE1565C6C07E4B220FC478158E9EBAD1624D8E60EC80634453A22D3B350C7C336482EED1AC0D0A7A8020C200B751A39B5121725EB540E35E20F0AA459AF423FD23B8B01F296893A6FD48A33669D68FD44A27D14E70953309CA9DD2825898EA0409A2DFF6F910C039B17CCB336ECFC0F4C31A43B87CEBE111585D086214DF4C9822A162968DE29AA2E6DE5ECBA8B21F5EEC9DEB51695F75B585EE127F69B2AA8A431139D22C83B350D2A43CBFBC70D19706CAB4861CDE0BE220B27ADD31C71D9FCBFFCAD3AA3CCA06D8C5FDEAFC45567AFE3E11FB1D6EC4212E165D5CF873CFDA130159D86CDCEB68AE0E17772C203520680142CA3A16FC9A31AB1888362FD47178C7A75173CA5B711CDE1C2CEE58C7FE76E60A60D86D8849ED87398BAB88F2E46369FBACD53E6F68FC63B497A6081DDD77E0065695FED74FD27CCC99D794E4509B048D5E12A934D966E01124F300F27150DC806BE15A5D570CD969E00A81B780EFCB56C567D7E7A0194739D1E40532673A1905C13A1C7985148ABF75D2C997F5FD2C9C3C813482AF52FC7DEEF9FE1207E37570116DB413AEC6F82B5E5E842BB623FBCC5E698A2D37DA75BAEC322213587F20D9DC6366B879F2D0E201556AD4ACEE6A728CEC22F0A761B074225B2A4A92531A46ED46770DA4703779FD054AA8363808C6BE5B98C2783283312A177C238E681514453CC6D382C5931402C7531FBBE95659AB44A3CED8EE4A9B321233D877EACFDC74A794BD9A267B5B4CABEDA8CA0C484D4E282BD71462F88F3E6B77D951C625DB704BC1CB515818A13AEE62585E3D6ABEB08BDF000000FFFF0300504B030414000600080000002100D664B351F4000000310300001C000801776F72642F5F72656C732F646F63756D656E742E786D6C2E72656C7320A2040128A0000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000AC92CB6AC3301045F785FE83987D2D3B7D5042E46C4A21DBD6FD00451E3FA82C09CDF4E1BFAF4849EBD060BAF072AE9873CF8036DBCFC18A778CD47BA7A0C87210E88CAF7BD72A78A91EAFEE41106B576BEB1D2A1891605B5E5E6C9ED06A4E4BD4F58144A23852D03187B594643A1C34653EA04B2F8D8F83E634C656066D5E758B7295E777324E19509E30C5AE561077F535886A0CF81FB66F9ADEE083376F033A3E53213F70FF8CCCE9384A581D5B640593304B4490E745564B8AD01F8B6332A7502CAAC0A3C5A9C0619EABBF5DB29ED32EFEB61FC6EFB09873B859D2A1F18E2BBDB7138F9FE828214F3E7AF9050000FFFF0300504B030414000600080000002100B755428A2C060000911A000015000000776F72642F7468656D652F7468656D65312E786D6CEC594D8B1B3718BE17FA1FC4DC1D8FED197F2CF1067B6C276D7693907552729467E419653523339277D78440494EBD140A69E9A181DE7A28A581061A7AE98F594868D31F514933638F6CB94BBA0E84D235ACF5F1BCAF1EBDAFF448E3B97AED2C26E004A50CD3A46BD5AED81640894F039C845DEBDE7854695B8071980490D00475AD0562D6B5FD8F3FBA0AF778846204847DC2F660D78A389FED55ABCC17CD905DA1339488BE294D63C845350DAB410A4F85DF9854EBB6DDACC610271648602CDC8E850D0810B83D9D621F59FB85FB2111FF12CE64834FD223E91CE536256C705C935F6CC13C92821348BA961829A0A76374C62D4020E3A2A36BD9EACFAAEE5FAD2E8D08DF625BB21BA9BFDC2E37088EEBCA2E0D274B43C7719D666FE95F0108DFC40D5BC3E6B0B9F4A700D0F7C54C332EBACF56DD73726C0994150DBE07AD41A3A6E14BFE1B1BF89E2B3F1A5E81B2A2B3811F8DBC550C4BA0ACE86EE0DD7EA73FD0FD2B50566C6EE05B766FE0B434BC02450427C71B68DB6D36BC62B64BC894921B4678C77546AD7A0E5FA1AAA5D595D9277CDB5A8BE1439A8E04402517729C00BE98A129F405CE83044F520C0E7018898537830965A2D9AEDB23BB21FECB8FA34A2AA3700FC19275D6E4B38D26C907303FC533DEB53E155EAD12E4F5AB57E74F5E9E3FF9F5FCE9D3F3273FE7636FDADD804958B67BFBC3577F3DFF1CFCF9CBF76F9F7D6DC6B332FECD4F5FBCF9EDF77F72CF355ADFBC78F3F2C5EB6FBFFCE3C76706782F8593327C8C63C4C02D740AEED2584CD030009AA4EF66318E202E5BF49290C1044A1B037AC8230D7D6B010934E0FA488FE3FD54C88509787DFE50237C14A5738E0DC09B51AC010F29257D9A1AE774538E558EC23C09CD83A7F332EE2E8427A6B1BDB52C0FE733B1EEB1C9A517218DE61D22520E4394200E641F3D46C860F600632DAE87D84F29A3530E1E60D087D81892319E68AB69657403C7222F0B1341916F2D3687F7419F1293FB013AD191626F406272898816C6EB70CE616C640C6352461E401E99481E2D525F0B38E322D32122140C03C498C9E676BAD0E8DE1432634EFB2159C43A32E5F8D8843C80949691037AEC45309E1939E3242A633F61C76289427087722309AAEF1059177980C9D674DFC7484BF7C57BFB9E9021F302913DF3D4B42510D5F7E3824C2152CEAB6BBA1EE3E442915F9377F7FDC9BB10D1D7DF3D376BEE0E24DD0CBC8C98F7526CDC4DEB12BE0DB72EDC1E4D03FCE1EBF600CE933B486C1503F47FD9FE5FB6FFF3B2BD6D3FEF5EAC57FAAC2EF2C5755DB989B7DEDDA7989023BE20E880296567627AC14834AA8A325A3E2ACC2251CC87D370610A5519A4947F86797414C19918A6A6460859EE3A64604699381B54B3D1B7EC20F3F89006596BAD563C9D0A03C857EDE26C29DAC549C4B3D6666BF518B674AF6AA17A5C2E0848DB7721511A4C27D1309068158D17905033DB098B8E81455BBADFCA427DE55911FB0F40F9D386EB648CC47A830405324F997D91DD9D677A5B30F569D70DD3EB48AEBBC9B446A2B4DC7412A56518C100AD37EF38D79D554A357A32149B345AEDF7916B29226BDA4012BD064EC59E6BB8C28D0F675D6B2A6E85A218CF843F2675139230E95A3ECF03FD6F946596323E802CCA60AA2B9B7F8C394A01C1B158EBE5349064C5AD566FC9397EA0E43AF6871739F5554E329A4E91CFB7B4ACAAA22F7362ECBD245856E85C903E8A82533021F3F42E1481725B3519C00033BE8C6680D3D2E25E45714DAEF2ADA8FD6AB6DAA290CC22989F286531CFE0AABCA4539A8762BA3E2BBD9E4F6612CA245DFAD4BDD84876944473CB01224F4DB37EBCBF43BEC46AA5FB1AAB4CBAD7B5AE5368DDB653E2F2074289DA6A308D9A646CA0B66AD5A9EDF042501A6EB934B79D11BB3E0DD657AD3C208A7BA5AA6DBC9EA0938762E50FC475754E385354D1997846F08A1F96332550AD85BA9C71304F71D77A64BB3DC7ABBB5EC56EBBC38AD370EC4ADBED352A3DD76DD4866ECD1EF4EB8F45507814D7DC6CEC91789E218BFCFD8B6ADF78071317D7EC2B3E8DAB54DD83ABCA58BD83A9D5B57730D93D198C65BF05B088CCA3667DD46974FACD4AA7D11B559C41BF5DE978CD7E65D0F45A83D1C073DB9DD1630B9C28B0D36B784E73D8AE346B9E57719AB6A4DFEE545A4EBDDE735ABDF6D0E93DCE632D665E7C17E155BCF6FF060000FFFF0300504B0304140006000800000021002A11873C24040000D10B000011000000776F72642F73657474696E67732E786D6CB456DB6EE336107D2FD07F30F4EE5892252551D759C4F6BAC922EE16AB2C0AF48D12299B082F0249D9F116FDF70E2931729A7491A4C88B4DCD991BC93333FCF0F19EB3D18E284DA59805D149188C88A824A662330BBEDDAEC667C1481B24306252905970203AF878F1F34F1FF6B926C6809A1E810BA1735ECD82AD314D3E99E86A4B38D227B22102C05A2A8E0C7CAACD842375D736E34AF206195A5246CD6112876116F46EE42C6895C87B17634E2B25B5AC8D35C9655DD38AF47FDE42BD246E67B29455CB89302EE24411063948A1B7B4D1DE1B7FAB3700B7DEC9EE479BD871E6F5F651F882EDEEA5C20F162F49CF1A344A56446BB820CE7C82540C8193278E1E629F40EC7E8BCE159847A15B1D679EBECE41FCC4415691FBD7F938EB7D4CC0F2D80FC5AFF3933DF8A1C3C146D9DB923972A0C9EB5CA43E0F7DE0C38E347BC91D77D00D2D15525D05F517CCABFC7A23A442258374E0A247705723979DFD852DDB3FB784981750C8DFA5E4A37DDE1055019BA10BC46130B1007048D68541062CF38D421CAA7716548C20D1296052A396995B54164636A0B44390FCA9B7DF1E9A2D11AEC6FE84EEE1F1244E3BBCDA22852A4354D1A00A98BA90C228C9BC1E96BF49B3804EA180C8BD85EB1BC3AAE87A105808C461BB8FFACA5A626812FBBC55F4E5F7620D5CF4C827F96C20093D53514C6EED3117E6C0C80A922FE8777229F0E7561B0A1EDDCEFF47063F4A00CE15227F0162DC1E1AB222C8B4704CEF14CCDDC48AD1664D9592EA5A6020CABB05A3754D1404A040BC35D08B2AB977E77C45108651F54E715B4DFE0065A8CBE92DD0F26E2E8D91FC6AE0F0DBE3BA7A981CD317062ED67EF1554AF3A01AA6E1349D7EEA32B5E8808469B208FBDA7A8C4CB3D3B3C5F973C87F7B5B4471B28A9F439649348F167DCE7DA63CB703EE77E55796EE23DE592C102F1545A3B51D8113AB51AABB39151E2F09742E728C146DE9C1F1B80334478CADE0E03DE036CA734C75B324B55BB335529BC16FAFA19E95426FFAFCE0CB3636A27E55B26D3A74AF50D3D1D8AB4449D25B52616E28F772DD9685B712D06B8FA056E02F3BE5CE69389E7D6E8016AE1DDC20472FA74BC4F85BD1D38FA9C25287AC51D3740C2C37D12C6074B33591258D812F0C2F25F7516EE21E8B1D167798FB4095DD1968F78B41167BD991DED4CBA6832CF1B26490A55E960EB2CCCB322B83CE4E14A3E20E8AC12FADBC968CC93DC15703FE44D41D82DEA2862CBBF901F4929DA01F287AB4CBC93D8C2282A9810768433147F05888C238B3E6BD364307D99A47BA16B3CACD630F1819D497FFE491B1A3F8BF72B173ADA240C7E2C0CB611C9D748933AAA1753430B98C541EFBC561519263595DDB019BF45CCCA255B8582E3B387513CFB8EE02F7FE95D473A409EE316F9A76A67FCD3FA567A797E7E938CBA6E7E36411C1633C8B92F1E9799CCE2FB3F979942EFFEE8BD4BFC52FFE010000FFFF0300504B0304140006000800000021009B96322B770B0000B87200000F000000776F72642F7374796C65732E786D6CBC9D5D73DBBA1186EF3BD3FFC0D1557B91C89F72E239CE19C7896B4FE31C9FC86EAE2112B25093840A92B1DD5F5F00A424C84B505C70EB1B5B5FFB00C48B7789E587F4DBEFCF591AFDE2AA10323F1BEDBFDF1B453C8F6522F287B3D1FDDDE5BB0FA3A828599EB054E6FC6CF4C28BD1EF9FFEFA97DF9E4E8BF225E545A40179719AC567A345592E4FC7E3225EF08C15EFE592E7FACDB954192BF553F530CE987AAC96EF62992D5929662215E5CBF8606F6F326A30AA0F45CEE722E65F645C653C2F6DFC58F15413655E2CC4B258D19EFAD09EA44A964AC6BC28F4466769CDCB98C8D798FD2300CA44AC6421E7E57BBD314D8F2C4A87EFEFD94759BA011CE30007003089F9338EF1A1618C75A4CB11098E33597344E270C23AE3000A8E431CAFFA51BC64668BB2F8F4FA21978ACD524DD21A457A98230B367F756FCD3FFB507FFC939EB0898CBFF039ABD2B2304FD5AD6A9E36CFECBF4B999745F474CA8A58883BDD2F0DCF846EE7EA3C2FC448BFC359519E1782B5BEB9300F5ADF898BD279F9B348C4686C5A2CFEABDFFCC5D2B3D1C1C1EA950BD383ADD752963FAC5EE3F9BBFBA9DB13E7A599E69E8D987A373D3781E366C3EAFFCEE62E5F3FB30D2F592C6C3B6C5E72EDC5FDC99E81A6C258FFE0F8E3EAC98FCA8C39AB4AD9346201F5FF35760C465C5B541B765AE70DFD2E9F7F93F1234FA6A57EE36C64DBD22FDE5FDF2A2195CE0D67A38FB64DFDE29467E24A2409CF9D0FE60B91F09F0B9EDF173CD9BCFEE7A5F577F3422CAB5C3F3E3C99D8599016C9D7E7982F4DB6D0EFE6CC68F2DD04A4E6D395D8346EC3FFB382ED374AB4C52F38332933DA7F8DB0DD47210E4C44E16C6D3BB37AB5EDF653A8860EDFAAA1A3B76AE8F8AD1A9ABC5543276FD5D087B76AC862FE9F0D893CE1CFB511613380BA8BE371239AE3311B9AE3F1129AE3B10A9AE371029AE399E8688E671EA3399E698AE09432F6CD4267B21F7A667B3777F73E228CBB7B9710C6DDBD0708E3EE4EF861DCDDF93D8CBB3B9D87717767EF30EEEE648DE7D64BADE85ADB2C2F07BB6C2E6599CB9247257F1E4E63B966D93A928667767A5C916C2401A6CE6CCD8E78302D66F6F9EE19624D1ABE3F2F4D8117C97934170F95E2C5E08EF3FC174FE592472C49348F10A8785929CF8884CC69C5E75CF13CE694139B0E6A2AC128AFB219C1DC5CB2073216CF13E2E15B114992C27A42EBFA79614C22082675C6622587774D32B2FCF04D14C3C7CA40A2CF559A7222D6779A296659C36B038B195E1A58CCF0CAC0628617068E665443D4D08846AAA1110D5843231AB77A7E528D5B43231AB78646346E0D6DF8B8DD8932B529DE5D75ECF73F7677914A73E47F703FA6E221677A01307C77D31C338D6E99620F8A2D1791392ADD8E75B719DBCE6799BC447714FBB435896A5D6FA7C885DE6A9157C307748B4665AE358FC85E6B1E91C1D6BCE116BBD1CB64B340BBA2A967A6D5AC6C35AD25F532ED94A555BDA01DEE36560E9F611B035C0A5590D9A01D4B3083BF9BE5AC919322F36D7A39BC631BD6705BBDCE4AA4DD6B9004BD4C65FC489386AF5E965CE9B2EC7130E952A6A97CE2091D715A2A59CF35D7F20756925E96FF9A2D17AC10B656DA42F4DFD5AFAE19886ED872F006DDA64CE434BA7D7D97319146742B88ABBB9B6FD19D5C9A32D30C0C0DF0B32C4B9991319B23817FFBC9677FA7E9E0B92E82F317A2AD3D273A3C6461178260275393644244D2CB4C910B927DA8E5FD93BFCC2453090DED56F1FA329D921311A72C5BD68B0E026FE9BCF8A4F30FC16AC8F2FEC59430C785A84C754702730E1B16D5ECDF3C1E9EEABECB88E4C8D01F55698F3FDAA5AE8DA6C30D5F266CE1862F11AC9A7AF760E62FC1C66EE1866FEC168E6A632F525614C27B0A359847B5B92B1EF5F60E2FFE1A9E4CA59A5729DD00AE806423B802920DA14CAB2C2F28B7D8F20837D8F2A8B79770CA581EC12139CBFB87120999181646A5848551C96061541A5818A900C3AFD07160C32FD37160C3AFD5A961444B00074635CF4877FF4467791C18D53CB330AA79666154F3CCC2A8E6D9E19788CFE77A114CB78B71905473CE41D2ED68F292674BA9987A21427E4DF9032338405AD36E959C9BFB37645E5FC44D8034C7A853C2C5768DA312F9279F9175CDB028FB45704494A5A99444C7D6363B1C1BB97DEDDAAE307B27C7E02EDCA62CE60B99265C79B6C91FABEBE5697D5BC6EBEEDB6EF43AECF94D3C2CCA68BA581FED773193BD9D91AB827D2B6C77836D633E59DDCFD21676C3135165AB8EC29B292687FD83ED8CDE0A3EDA1DBC59496C451EF78C846D4E76476E56C95B91273D23619B1F7A465A9F6E4576F9E10B538FAD13E1A46BFEAC6B3CCFE43BE99A45EBE0D666BB26D23AB26D0A9E74CDA22DAB44E7716CCE164075FA79C61FDFCF3CFE788C8BFC148C9DFC94DEBEF223BA0CF683FF1266CF8E499AB6BDF5D51320EFDB4574AFCCF96725EBE3F65B279CFADFD475AD174E79C1A356CE61FF13575B59C63F8EBDD38D1FD13BEFF811BD13901FD12B1379C35129C94FE99D9BFC88DE49CA8F40672BB847C0652B188FCB56303E245B414A48B61AB00AF0237A2F07FC08B45121026DD4012B053F026554101E645448411B1522D0468508B451E1020C6754188F332A8C0F312AA484181552D0468508B45121026D5488401B1522D0460D5CDB7BC3838C0A2968A34204DAA8108136AA5D2F0E302A8CC71915C687181552428C0A2968A34204DAA81081362A44A08D0A1168A34204CAA8203CC8A89082362A44A08D0A1168A3D6B71A861B15C6E38C0AE3438C0A2921468514B45121026D5488401B1522D0468508B45121026554101E645448411B1522D0468508B451EDC9C2014685F138A3C2F810A3424A885121056D5488401B1522D0468508B45121026D54884019158407191552D0468508B45121A26B7E36A7287D97D9EFE38F7A7AAFD8EF7FEAAAE9D40FF7566E1775D81FB5EA959FD5FF5E84CF523E46AD371E1EDA7AA31F44CC5221ED216ACF6975976B2F89409DF8FCE3A2FB0E1F973EF04B979A7B21EC3953003FEA1B098EA91C754D7937121479475D33DD8D04ABCEA3AEECEB4682DDE05157D2B5BE5C5D94A2774720B82BCD38C1FB9EF0AE6CED84C321EECAD14E201CE1AECCEC04C201EECAC74EE0716492F3EBE8E39EE334595F5F0A085DD3D1219CF8095DD3126AB54AC7D0187D45F313FAAAE727F495D14F40E9E9C5E085F5A3D00AFB516152439B61A50E37AA9F80951A1282A4069870A9212A586A880A931A2646ACD49080953A3C39FB094152034CB8D410152C354485490D776558A921012B352460A51EB843F662C2A586A860A9212A4C6AB8B8C34A0D0958A921012B352404490D30E1524354B0D410152635A892D1524302566A48C04A0D094152034CB8D410152C354475496D8FA26C498D52D809C72DC29C40DC0ED909C425672730A05A72A203AB258710582D41AD569AE3AA2557343FA1AF7A7E425F19FD04949E5E0C5E583F0AADB01F152635AE5A6A933ADCA87E02566A5CB5E4951A572D754A8DAB963AA5C6554B7EA971D5529BD4B86AA94DEAF0E4EC2704498DAB963AA5C6554B9D52E3AA25BFD4B86AA94D6A5CB5D42635AE5A6A937AE00ED98B09971A572D754A8DAB96FC52E3AAA536A971D5529BD4B86AA94D6A5CB5E4951A572D754A8DAB963AA5C6554B7EA971D5529BD4B86AA94D6A5CB5D42635AE5AF24A8DAB963AA5C6554B9D52E3AAA51B1D2208BE026A9A31554674DF1777C58A45C9867F39E17DAE7821D35F3C896837F51B6A2BC74F5B3F7F65D8F607F4F4E74B3D66E61BD09DDB9592FA1B601BA0FDE075B2FE992A136C7A12353F08D6BC6C3BDC9CAEAD5BB481B0A978A1DB8A9BEFAEF2347559E9BEF2842F956273B954FAA10978DDB4E7AB6A6D57365370F5E966503723567F6E6BBC3A7B5E9A29DFD16B630996778D52ED1A5F073F366960570F757F6669FDA369FAC1759E68C053F38361754F936756A3F4FB173C4D6F58FD69B9F47F34E5F3B27E777FCF7E69C1ABF767F5F7EF79E3954DD45EC078BB33F5D3E687DB3CE35D7F237F73058167CCA7224F753A622D036E2F68193AD69BDEAD1E159FFE070000FFFF0300504B03041400060008000000210040C1FFF1390100002303000014000000776F72642F77656253657474696E67732E786D6C9CD25F4FC2301000F07713BFC3D277E820B2908541620CC61763A27E80D2DDA0B1ED2DBDE2C04FEF6D02627861BEF4FFFD72D776B6D8399B7C422083BE10A3612A12F01A4BE3D785787F5B0EA622A1A87CA92C7A28C41E482CE6B737B3266F60F50A31F2494A58F1943B5D884D8C752E25E90D384543ACC1F36685C1A9C8D3B0964E858F6D3DD0E86A15CDCA5813F7729CA6993830E11A05ABCA687840BD75E063172F035816D1D3C6D474D49A6BB406435907D440C4F538FBE33965FC8919DD5D40CEE88084551C7231878C3A8AC347693772F61798F403C61740A661D7CF981E0CC991E78E29FB39D9C931E599F3BF64CE00827EC4E49807ED5D5B91D3F9D3DA63502BCB12BF51C2D79C7470DB72B66DD70DF9F89C7F2DD6D138F3054B0CF7011B8220DB65652D362FCF8F3C917FBEF6FC1B0000FFFF0300504B0304140006000800000021009AD4979ADA0100001F06000012000000776F72642F666F6E745461626C652E786D6CDC92C18ADB301086EF85BE83D07D63D989B3A95967A1ED060AA587B27D0045966D514B321A25DEBC7D47B2930D8485750F3DD40659FA47F369F47B1E1E5F74478ED281B2A6A4E98251228DB095324D497F3DEFEE369480E7A6E29D35B2A42709F471FBF1C3C350D4D67820986FA0D0A2A4ADF77D9124205AA9392C6C2F0D066BEB34F7B8744DA2B9FB7DE8EF84D53DF76AAF3AE54F49C6D89A4E18F71E8AAD6B25E4572B0E5A1A1FF313273B245A03ADEAE14C1BDE431BACAB7A678504C03BEB6EE469AECC0593AE6E405A0967C1D67E8197992A8A284C4F599CE9EE1590CF03643780B5902FF3189B899160E6354755F338EB0B4755579CBF2BE60A00721E223FD701271D6EA445F1AD31D6F17D8724FC47046D26111C46AC367CE214B76FA77E254361B8C6842FBC537BA762A0E7C6824C3176E45D4959C6762CC731BC2BB60C234DC246D172073240C68D6C946BAE55773AAB30288031D02B2FDAB37EE44E8562C710A8060307D8B3923EAD18CB9E763B3A2A2956C75059DD7F9E942C9C159F4F93B2BC282C282272E2321D3922722E7BF0CC6474E0C68967A525901F72203FADE6E60D4732B6462772F42338B39CE5888BDC598E84FBDF3872BFC9FF8923536F90EFAA69FD9B1D12FAE23FED906902DB3F000000FFFF0300504B0304140006000800000021004A9DBD9674010000FD02000011000801646F6350726F70732F636F72652E786D6C20A2040128A00001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008C92414FC3201480EF26FE87867B0BED12339BB64BD4CC8B4B4C9CD1784378DB702D20B075FBF7D276ED6CDCC1DB7BBC8F8FC7836C76A8CA600FC60A2573144704052099E242AE73F4BA9C875314584725A7A59290A32358342BAEAF32A653A60C3C1BA5C1380136F0266953A673B4714EA7185BB6818ADAC813D21757CA54D4F9D4ACB1A66C4BD78013426E70058E72EA286E84A11E8CE8A4E46C50EA9D295B0167184AA8403A8BE328C667D681A9ECC50D6DE517590977D47011ED8B037DB06200EBBA8EEA498BFAFE63FCBE787A69AF1A0AD9CC8A012A32CE52275C094586CFA18FECEEF30B98EB9687C4C7CC0075CA148F82CA95F116152CA834E27B072DDBD79BC96FE1582BC3ADB78C328F71B0CC08EDFC7B76678C163C5D52EB16FE815702F8DDF1F2717FB166A781BD68FE4991B4C49066A7A1772D020FFCB0D26EB47DE56D72FFB09CA32221491C92384CE22589D3C93425E4A3E972B4FF2CAC4E0DFCDF783B36F6826E50E30F5BFC000000FFFF0300504B030414000600080000002100B0CF097367010000C002000010000801646F6350726F70732F6170702E786D6C20A2040128A00001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009C52CB6EC23010BC57EA3F44B983430FA8428B5105AA7AE803890067CBD924561DDBB20D82BFEF86409AB6B7FAB433EB1DCD8E0D8B53A39323FAA0AC99A79371962668A42D94A9E6E9367F1E3DA64988C214425B83F3F48C215DF0FB3B587BEBD0478521210913E6691DA39B3116648D8D08636A1BEA94D6372212F415B365A924AEAC3C3468227BC8B229C3534453603172BD60DA29CE8EF1BFA28595ADBFB0CBCF8EF438E4D8382D22F2F7765203EB09C86D143A570DF209D13D80B5A830B45C57C0DEFAE282BB0296B5F042468A8E4F810D103C39A795149122E56F4A7A1B6C19938F8BCFA49D0636BC02E47D83F2E0553CF30CD810C2AB329D8BAE20575E545EB8FA6AAD47B09142E392B6E6A5D001817D13B0B48D1386E4585F91DE67D8BADCAEDA14AE233FC9C18A7B15EB8D13127F2D3BE061432C16E4BE37D013F042EFE075AB4EB3A6C2E276E76FA38D6FD77D483E998E333A97BC6E1C6DDDFF14FE050000FFFF0300504B01022D0014000600080000002100DFA4D26C5A010000200500001300000000000000000000000000000000005B436F6E74656E745F54797065735D2E786D6C504B01022D00140006000800000021001E911AB7EF0000004E0200000B00000000000000000000000000930300005F72656C732F2E72656C73504B01022D0014000600080000002100702846C7E3020000080B00001100000000000000000000000000B3060000776F72642F646F63756D656E742E786D6C504B01022D0014000600080000002100D664B351F4000000310300001C00000000000000000000000000C5090000776F72642F5F72656C732F646F63756D656E742E786D6C2E72656C73504B01022D0014000600080000002100B755428A2C060000911A00001500000000000000000000000000FB0B0000776F72642F7468656D652F7468656D65312E786D6C504B01022D00140006000800000021002A11873C24040000D10B000011000000000000000000000000005A120000776F72642F73657474696E67732E786D6C504B01022D00140006000800000021009B96322B770B0000B87200000F00000000000000000000000000AD160000776F72642F7374796C65732E786D6C504B01022D001400060008000000210040C1FFF13901000023030000140000000000000000000000000051220000776F72642F77656253657474696E67732E786D6C504B01022D00140006000800000021009AD4979ADA0100001F0600001200000000000000000000000000BC230000776F72642F666F6E745461626C652E786D6C504B01022D00140006000800000021004A9DBD9674010000FD0200001100000000000000000000000000C6250000646F6350726F70732F636F72652E786D6C504B01022D0014000600080000002100B0CF097367010000C0020000100000000000000000000000000071280000646F6350726F70732F6170702E786D6C504B0506000000000B000B00C10200000E2B00000000	20762C_MOD16.docx	0xFF0353400E51310FC4D33545741A36F93CAF9962A0	NULL	docx	11749	2021-01-20 20:37:44.9052887 -05:00	2021-01-20 20:39:13.4419941 -05:00	2021-01-20 20:39:14.6479659 -05:00	0	0	0	0	1	0	0
*/
SELECT * FROM DocumentStore
-- Step 9: Check Non-Transactional Access
-- Select and execute the following statement to check whether non-transactional
-- access is enabled for all databases. This is the same query as in Step 6.
-- In the results, scroll down to locate the AdventureWorks2016 database

SELECT DB_NAME(database_id), non_transacted_access, non_transacted_access_desc
    FROM sys.database_filestream_options;
GO

delete from DocumentStore
where stream_id='87CE3477-895B-EB11-9853-68071552F25F'